<html>
<head>
<title></title>
<link rel="stylesheet" href="../../../main/resources/styles/common.css" type="text/css" />
<link rel="stylesheet" href="../../../main/resources/styles/gadget.css" type="text/css" />
<script type="text/javascript" src="http://issues.marvelution.com/s/587/3/3.0.9/_/download/batch/com.atlassian.auiplugin:ajs/com.atlassian.auiplugin:ajs.js"></script>
<script type="text/javascript" src="http://issues.marvelution.com/s/587/3/1.0/_/download/batch/jira.webresources:jira-global/jira.webresources:jira-global.js"></script>
<script type="text/javascript" src="../../../main/resources/scripts/date.js"></script>
<script type="text/javascript" src="../../../main/resources/scripts/hudson-utils.js"></script>
<script type="text/javascript" src="../../../main/resources/scripts/hudson-trigger-parser.js"></script>
</head>
<body>
<div id="gadget"></div>
<script type="text/javascript">
var gadget = {
		getMsg: function(e) {
			return "Updated by <a href=\"{0}/user/{1}\">{1}</a>";
		}
};
var hudsonServer = {host : "http://hudson.builds.marvelution.com"};
var jobs = [{"name":"Successful","url":"job/Free-Style/","description":"test","buildable":true,"Builds":[{"number":4,"url":"job/Free-Style/4/","jobName":"Free-Style","jobUrl":"job/Free-Style/","duration":6,"timestamp":1295543125000,"result":"SUCCESSFUL","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},{"number":3,"url":"job/Free-Style/3/","jobName":"Free-Style","jobUrl":"job/Free-Style/","duration":6,"timestamp":1295543124000,"result":"SUCCESSFUL","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},{"number":2,"url":"job/Free-Style/2/","jobName":"Free-Style","jobUrl":"job/Free-Style/","duration":6,"timestamp":1295543121000,"result":"SUCCESSFUL","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},{"number":1,"url":"job/Free-Style/1/","jobName":"Free-Style","jobUrl":"job/Free-Style/","duration":9,"timestamp":1295543118000,"result":"SUCCESSFUL","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]}],"firstBuild":{"number":1,"url":"job/Free-Style/1/","jobName":"Free-Style","jobUrl":"job/Free-Style/","duration":9,"timestamp":1295543118000,"result":"SUCCESSFUL","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},"lastBuild":{"number":4,"url":"job/Free-Style/4/","jobName":"Free-Style","jobUrl":"job/Free-Style/","duration":6,"timestamp":1295543125000,"result":"SUCCESSFUL","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},"lastSuccessfulBuild":{"number":4,"url":"job/Free-Style/4/","jobName":"Free-Style","jobUrl":"job/Free-Style/","duration":6,"timestamp":1295543125000,"result":"SUCCESSFUL","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},"lastStableBuild":{"number":4,"url":"job/Free-Style/4/","jobName":"Free-Style","jobUrl":"job/Free-Style/","duration":6,"timestamp":1295543125000,"result":"SUCCESSFUL","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},"lastCompletedBuild":{"number":4,"url":"job/Free-Style/4/","jobName":"Free-Style","jobUrl":"job/Free-Style/","duration":6,"timestamp":1295543125000,"result":"SUCCESSFUL","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},"healthReports":[{"description":"Build stability: No recent builds failed.","icon":"HEALTH_OVER_80","score":100}],"modules":[]},
            {"name":"Failed","url":"job/Maven%202/","description":"","buildable":true,"Builds":[{"number":5,"url":"job/Maven%202/5/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":5,"timestamp":1295543132000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},{"number":4,"url":"job/Maven%202/4/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":10,"timestamp":1295543131000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},{"number":3,"url":"job/Maven%202/3/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":6,"timestamp":1295543129000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},{"number":2,"url":"job/Maven%202/2/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":137,"timestamp":1295543127000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},{"number":1,"url":"job/Maven%202/1/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":1249,"timestamp":1295543114000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]}],"firstBuild":{"number":1,"url":"job/Maven%202/1/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":1249,"timestamp":1295543114000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},"lastBuild":{"number":5,"url":"job/Maven%202/5/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":5,"timestamp":1295543132000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},"lastFailedBuild":{"number":5,"url":"job/Maven%202/5/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":5,"timestamp":1295543132000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},"lastCompletedBuild":{"number":5,"url":"job/Maven%202/5/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":5,"timestamp":1295543132000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},"healthReports":[{"description":"Build stability: All recent builds failed.","icon":"HEALTH_00_TO_19","score":0}],"modules":[]},
            {"name":"Unstable","url":"job/Maven%202/","description":"","buildable":true,"Builds":[{"number":5,"url":"job/Maven%202/5/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":5,"timestamp":1295543132000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},{"number":4,"url":"job/Maven%202/4/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":10,"timestamp":1295543131000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},{"number":3,"url":"job/Maven%202/3/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":6,"timestamp":1295543129000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},{"number":2,"url":"job/Maven%202/2/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":137,"timestamp":1295543127000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},{"number":1,"url":"job/Maven%202/1/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":1249,"timestamp":1295543114000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]}],"firstBuild":{"number":1,"url":"job/Maven%202/1/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":1249,"timestamp":1295543114000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},"lastBuild":{"number":5,"url":"job/Maven%202/5/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":5,"timestamp":1295543132000,"result":"UNSTABLE","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},"lastFailedBuild":{"number":5,"url":"job/Maven%202/5/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":5,"timestamp":1295543132000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},"lastCompletedBuild":{"number":5,"url":"job/Maven%202/5/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":5,"timestamp":1295543132000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},"healthReports":[{"description":"Build stability: All recent builds failed.","icon":"HEALTH_00_TO_19","score":0}],"modules":[]},
            {"name":"Aborted","url":"job/Maven%202/","description":"","buildable":true,"Builds":[{"number":5,"url":"job/Maven%202/5/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":5,"timestamp":1295543132000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},{"number":4,"url":"job/Maven%202/4/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":10,"timestamp":1295543131000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},{"number":3,"url":"job/Maven%202/3/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":6,"timestamp":1295543129000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},{"number":2,"url":"job/Maven%202/2/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":137,"timestamp":1295543127000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},{"number":1,"url":"job/Maven%202/1/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":1249,"timestamp":1295543114000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]}],"firstBuild":{"number":1,"url":"job/Maven%202/1/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":1249,"timestamp":1295543114000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},"lastBuild":{"number":5,"url":"job/Maven%202/5/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":5,"timestamp":1295543132000,"result":"ABORTED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},"lastFailedBuild":{"number":5,"url":"job/Maven%202/5/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":5,"timestamp":1295543132000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},"lastCompletedBuild":{"number":5,"url":"job/Maven%202/5/","jobName":"Maven 2","jobUrl":"job/Maven%202/","duration":5,"timestamp":1295543132000,"result":"FAILED","state":"UNKNOWN","artifacts":[],"triggers":[{"UserTrigger":{"username":"anonymous"}}],"relatedIssueKeys":[],"changeLog":[]},"healthReports":[{"description":"Build stability: All recent builds failed.","icon":"HEALTH_00_TO_19","score":0}],"modules":[]},
            {"name":"Not Build","url":"job/No%20Builds/","description":"","buildable":true,"Builds":[],"healthReports":[],"modules":[]}];
for (var index in jobs) {
	var job = jobs[index];
	var jobDiv = AJS.hudson.utils.createDiv();
	jobDiv.addClass('job');
	var resultsDiv = AJS.hudson.utils.createDiv();
	resultsDiv.addClass('result');
	if (job.lastBuild !== undefined && job.lastBuild.result !== undefined) {
		resultsDiv.addClass(job.lastBuild.result.toLowerCase());
	} else {
		resultsDiv.addClass('notbuild');
	}
	var nameDiv = AJS.hudson.utils.createDiv();
	nameDiv.addClass('name');
	resultsDiv.append(nameDiv);
	var detailsDiv = AJS.hudson.utils.createDiv();
	detailsDiv.addClass('details');
	if (job.lastBuild !== undefined) {
		var triggers = "";
		var details = [{
			"label": "__MSG_hudson.gadget.build.on__",
			"value": new Date(job.lastBuild.timestamp).format("d-m-Y H:i:s")
		},{
			"label": "__MSG_hudson.gadget.build.in__",
			"value": Date.duration(job.lastBuild.duration)
		},{
			"label": "__MSG_hudson.gadget.build.because__",
			"value": AJS.hudson.trigger.parser.parse(gadget, hudsonServer, job, job.lastBuild)
		}];
		nameDiv.append(AJS.hudson.utils.createLink(hudsonServer.host + "/" + job.lastBuild.url, job.name + " #" + job.lastBuild.number));
		detailsDiv.append(AJS.hudson.utils.createDetailsTable(details));
	} else {
		nameDiv.append(AJS.hudson.utils.createLink(hudsonServer.host + "/" + job.url, job.name));
		detailsDiv.text("__MSG_hudson.gadget.no.build.info__");
	}
	resultsDiv.append(detailsDiv);
	jobDiv.append(resultsDiv);
	AJS.$("#gadget").append(jobDiv);
}
</script>
</body>
</html>